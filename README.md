# TaskFlow

TaskFlow は、ユーザーが自分のプロジェクトとタスクを直感的に管理できるタスク管理アプリです。  
各ユーザーはアカウントを作成し、プロジェクト作成後、そのプロジェクトに紐付けたタスクを追加、編集、削除することができます。  
タスクは「未着手」「進行中」「完了」の状態で管理でき、進捗状況を簡単に確認できます。

## 主な機能

-   ユーザー登録とログイン
-   プロジェクトの作成、編集、削除
-   プロジェクトごとにタスクを管理
-   タスクの追加、編集、削除
-   タスクの状態（未着手、進行中、完了）による分類表示

## デプロイ先

このアプリは [Render](https://taskflow-qoay.onrender.com/) にデプロイされています。

## 実行環境

| 言語・フレームワーク等 | バージョン |
| ---------------------- | ---------- |
| Node.js                | 22.12.10   |
| npm                    | 11.1.0     |

上に挙げたもの以外は package.json を参照してください．

## ローカルでの実行方法

1. リポジトリをクローンします。

    ```sh
    git clone https://github.com/naok-000/taskflow.git
    ```

2. ディレクトリに移動し、依存パッケージをインストールします。

    ```sh
    cd taskflow
    npm install
    ```

3. アプリを起動します．

    ```sh
    npm start
    ```

4. ブラウザで http://localhost:3000 にアクセスし、ホームページからユーザー登録またはログインを行います。

5. ログイン後、プロジェクト一覧画面からプロジェクトやタスクを管理できます。

## 技術スタック

-   Node.js
-   Express
-   MongoDB / Mongoose
-   Passport（認証）
-   EJS（テンプレートエンジン）
-   Bootstrap（フロントエンドデザイン）
-   Joi（入力検証と HTML エスケープ）

## ファイル構成

```
taskflow (プロジェクトルート)
├── .env                   // 環境変数（DBのURL、シークレットなど）を定義
├── .gitignore             // Gitに含めたくないファイルやディレクトリの指定
├── app.js                 // アプリケーションのエントリーポイント（Expressの設定、DB接続、ルーティングなど）
├── package.json           // プロジェクトのメタデータ、依存パッケージ、実行スクリプト
├── README.md              // プロジェクト概要、使用方法、ファイル構成の説明
├── constants/
│   └── taskStatus.js      // タスクのステータス定数（例："未着手", "進行中", "完了"）の定義
├── controllers/
│   ├── projects.js        // プロジェクトに関するCRUD操作の処理
│   ├── tasks.js           // タスクに関する操作（一覧、更新、削除、編集画面など）の処理
│   └── users.js           // ユーザーの登録、ログイン、ログアウトなど認証処理
├── middlewares.js         // 共通ミドルウェア（バリデーション、認証、オーナーチェックなど）
├── models/
│   ├── project.js         // プロジェクトのMongooseスキーマ（タイトル、説明、オーナー）
│   ├── task.js            // タスクのMongooseスキーマ（タイトル、説明、状態、所属プロジェクト）
│   └── user.js            // ユーザーのMongooseスキーマとPassport連携設定
├── public/
│   └── javascripts/
│       └── validateForms.js  // クライアントサイドのフォーム検証スクリプト（Bootstrap用）
├── routes/
│   ├── projects.js        // プロジェクト関連のルーティング
│   ├── tasks.js           // タスク関連のルーティング
│   └── users.js           // ユーザー認証・管理のルーティング（登録、ログイン、ログアウト）
├── schemas/
│   ├── joiExtension.js    // JoiのHTMLエスケープ機能を拡張する処理
│   ├── projectSchema.js   // プロジェクト登録・編集時の入力検証用Joiスキーマ
│   └── taskSchema.js      // タスク登録・編集時の入力検証用Joiスキーマ
├── seeds/
│   └── index.js           // シードデータをMongoDBに挿入するスクリプト（初期データ用）
├── utils/
│   ├── catchAsync.js      // 非同期処理のエラーハンドリング用ユーティリティ関数
│   └── ExpressError.js    // カスタムエラークラス（Expressアプリ用）
└── views/
    ├── error.ejs          // エラー表示画面のテンプレート
    ├── home.ejs           // ホーム画面のテンプレート
    ├── layouts/
    │   └── boilerplate.ejs  // 共通のHTMLレイアウト（各画面のベースとなる構造）
    ├── partials/
    │   ├── flash.ejs      // フラッシュメッセージ（通知）用の部分テンプレート
    │   ├── footer.ejs     // フッター部分のテンプレート
    │   └── navbar.ejs     // ナビゲーションバーの部分テンプレート
    ├── projects/          // プロジェクト関連のテンプレート（一覧、詳細、編集など）
    ├── tasks/             // タスク関連のテンプレート（一覧、編集など）
    └── users/             // ユーザー関連のテンプレート（登録、ログインなど）
```

## 本アプリケーションの作成経緯

基本的な Web アプリケーションの実装の練習，および Web アプリケーションのポートフォリオとして本アプリケーションを作りました．

Web アプリケーションの基礎を学ぶため，
Udemy の講座[【世界で 90 万人が受講】Web Developer Bootcamp（日本語版）](https://www.udemy.com/course/the-web-developer-bootcamp-2021-japan/)を 2024 年 12 月から約 2 ヶ月間学習しました．

学習した知識を定着させるため，この講座内で用いられていた技術を用いてアプリケーションを作成しようと考えました．
作成するアプリケーションとして，CRUD 操作を持っており比較的基本的な技術のみで実装できるもの，かつ実用性があるものとして
タスク管理アプリを選択しました．

講座内で作られているサンプル Web アプリケーション「YelpCamp」の使用技術や作業手順を参考にしながら，
本アプリケーションを実装しました．
制作期間は約 1 週間です．

工夫した点として，
単純な CRUD に加えて，公開されることを想定したエラーハンドリングやセキュリティ対策も実装しました．
また，UI を工夫しよりよいユーザー体験を目指しました．
